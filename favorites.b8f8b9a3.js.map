{"mappings":"oeAAAA,EAAA,S,WCAA,IAAAC,EAAAD,EAAA,S,gBCAAE,EAAAF,EAAA,S,YAWM,MAAAG,EAAwBC,SAASC,cAAc,0BAC/CC,EAASF,SAASC,cAAc,2BAChCE,EAAYH,SAASC,cAAc,oBACnCG,EAAeJ,SAASC,cAAc,mBAEtCI,EAAiBL,SAASC,cAAc,0BAKhB,IAA1BK,EAAAC,QAAeC,QACjB,EAAAV,EAAAW,oBAAmBH,EAAAC,QAAgBR,IAEnCG,EAAOQ,UAAUC,IAAI,kBACrBR,EAAUO,UAAUC,IAAI,iBACxBP,EAAaM,UAAUC,IAAI,iBAC3BN,EAAeK,UAAUE,OAAO,kBAGlCb,EAAsBc,iBAAiB,SAEvC,SAAiBC,GAEC,GAAZA,EAAIC,OAAOL,UAAUM,SAAS,qBAAsB,EA5BpD,SAAeC,GACnBC,QAAQC,IAAIF,E,CA6BVG,CASJ,SAAqBC,GACnB,MAAMC,EAAYD,EAAKE,QAAQ,kBAAkBC,QAAQC,GACzD,OAAOnB,EAAAC,QAAemB,MAAK,EAACC,IAAEA,KAAUA,IAAQL,G,CAZ9BM,CAAYd,EAAIC,Q,CAI9BD,EAAIC,OAAOL,UAAUM,SAAS,oBAWpC,SAA6BK,EAAMQ,GACjC,MAAMP,EAAYD,EAAKE,QAAQ,kBAAkBC,QAAQC,GACnDK,EAAgBD,EAAIE,WACxBC,GAAQA,EAAKL,MAAQL,IAEvBO,EAAII,OAAOH,EAAe,GAC1BI,aAAaC,QArDM,WAuDjBC,KAAKC,UAAUR,G,CAlBfS,CAAoBxB,EAAIC,OAAQT,EAAAC,SAChCO,EAAIC,OAAOQ,QAAQ,kBAAkBX,S,IDpCzC,MAAM2B,EAAmBvC,SAASC,cAAc,yBAC1CuC,EAAwBxC,SAASC,cAAc,2BAKrD,EAAAJ,EAAA4C,oBACGC,MAAKC,IACJ,GAAoB,IAAhBA,EAAKnC,OACP,MAAM,IAAIoC,MAEZ,MAAMC,EAASF,EACZG,KACC,EAACC,KAAEA,KACD,mDAAmDA,qFAE/CA,iDAIPC,KAAK,IAERT,EAAiBU,mBAAmB,YAAaJ,EAAO,IAEzDK,OAAMC,GACLjC,QAAQC,IACN,8EAKNoB,EAAiB1B,iBAAiB,SAGlC,SAAiBC,GACf,GAAIA,EAAIC,OAAOL,UAAUM,SAAS,uBAAwB,CACxD,MAAMoC,EAKV,SAA6B/B,GAC3B,MAAMgC,EAAiBhC,EAAKE,QAAQ,yBAAyBC,QAAQ8B,SAGrE,OADElB,KAAKmB,MAAMrB,aAAasB,QC9CP,aD+CgBV,KACjC,EAACQ,SAAEA,KAAeA,IAAaD,G,CAVXI,CAAoB3C,EAAIC,SAC5C,EAAAjB,EAAAW,oBAAmB2C,EAAaZ,E","sources":["src/favourites.js","src/js/favorites/favorite_filter.js","src/js/favorites/favorite_recipes.js"],"sourcesContent":["import './js/hero';\nimport './js/slick.min';\n\nimport './js/favorites/favorite_filter';\nimport './js/favorites/favorite_recipes';\n\nimport './js/modals/mobile_menu';\nimport './js/modals/order_now';\nimport './js/modals/rating';\nimport './js/modals/recipe';\nimport './js/modals/scroll-up';\n\nimport './js/api';\nimport './js/templates';\n","import { getAllCategories } from '../api';\nimport { createCardTemplate } from '../card_template';\nimport { KEY_FAVORITE } from './favorite_recipes';\n\n\nconst favoriteFilterEl = document.querySelector('.favorite-filter-list');\nconst favoriteRecipesListEl = document.querySelector('.favorite-recipes-list');\n\n// const favoriteArrFromLocalStorage =\n//   JSON.parse(localStorage.getItem(KEY_FAVORITE)) ?? [];\n\ngetAllCategories()\n  .then(data => {\n    if (data.length === 0) {\n      throw new Error();\n    }\n    const markup = data\n      .map(\n        ({ name }) =>\n          `<li class=\"favorite-filter-item\" data-category=\"${name}\">\n             <button type=\"button\" class=\"favorite-filter-btn\">\n            ${name}\n             </button>\n            </li>`\n      )\n      .join('');\n\n    favoriteFilterEl.insertAdjacentHTML('beforeend', markup);\n  })\n  .catch(error =>\n    console.log(\n      'Sorry, there are no images matching your search query. Please try again.'\n    )\n  );\n\n\nfavoriteFilterEl.addEventListener('click', onClick);\n\n\nfunction onClick(evt) {\n  if (evt.target.classList.contains('favorite-filter-btn')) {\n    const findProduct = findProductByFilter(evt.target);\n    createCardTemplate(findProduct, favoriteRecipesListEl);\n  }\n}\n\nfunction findProductByFilter(elem) {\n  const searchCategory = elem.closest('.favorite-filter-item').dataset.category;\n  const favoriteArrFromLocalStorage =\n    JSON.parse(localStorage.getItem(KEY_FAVORITE));\n  return favoriteArrFromLocalStorage.map(\n    ({ category }) => category === searchCategory\n  );\n}\n","import { createCardTemplate } from '../card_template';\nimport favoritesArray from '../favorites-array';\n\nconst KEY_FAVORITE = 'favorite';\n\n// імпорт\nfunction createModal(product) {\n  console.log(product);\n}\n//імпорт\n\nconst favoriteRecipesListEl = document.querySelector('.favorite-recipes-list');\nconst heroEl = document.querySelector('.hero-section-favorites')\nconst filtersEl = document.querySelector('.favorite-filter');\nconst paginationEl = document.querySelector('.tui-pagination');\n\nconst emptyStorageEl = document.querySelector('.empty-storage-wrapper');\n\n// const favoriteArrFromLocalStorage =\n//   JSON.parse(localStorage.getItem(KEY_FAVORITE)) ?? [];\n\nif (favoritesArray.length !== 0) {\n  createCardTemplate(favoritesArray, favoriteRecipesListEl);\n} else {\n  heroEl.classList.add('hero-is-hidden');\n  filtersEl.classList.add('hiddenvisualy');\n  paginationEl.classList.add('hiddenvisualy');\n  emptyStorageEl.classList.remove('hiddenvisualy');\n}\n\nfavoriteRecipesListEl.addEventListener('click', onClick);\n\nfunction onClick(evt) {\n  //відкриття модалки\n  if (evt.target.classList.contains('card-template-btn')) {\n    const product = findProduct(evt.target);\n    createModal(product);\n  }\n  //видалення з favorites\n  if (evt.target.classList.contains('js-add-to-fav')) {\n    removeFromFavorites(evt.target, favoritesArray);\n    evt.target.closest('.card-template').remove();\n  }\n}\n\nfunction findProduct(elem) {\n  const productId = elem.closest('.card-template').dataset.id;\n  return favoritesArray.find(({ _id }) => _id === productId);\n}\n\nfunction removeFromFavorites(elem, arr) {\n  const productId = elem.closest('.card-template').dataset.id;\n  const removeElemIdx = arr.findIndex(\n    item => item._id === productId\n  );\n  arr.splice(removeElemIdx, 1);\n  localStorage.setItem(\n    KEY_FAVORITE,\n    JSON.stringify(arr)\n  );\n}\n\nexport { removeFromFavorites, KEY_FAVORITE };"],"names":["parcelRequire","$7rYDH","$c5nH8","$360ecc599a656a49$var$favoriteRecipesListEl","document","querySelector","$360ecc599a656a49$var$heroEl","$360ecc599a656a49$var$filtersEl","$360ecc599a656a49$var$paginationEl","$360ecc599a656a49$var$emptyStorageEl","$8KDTU","default","length","createCardTemplate","classList","add","remove","addEventListener","evt","target","contains","product","console","log","$360ecc599a656a49$var$createModal","elem","productId","closest","dataset","id","find","_id","$360ecc599a656a49$var$findProduct","arr","removeElemIdx","findIndex","item","splice","localStorage","setItem","JSON","stringify","$360ecc599a656a49$export$3d76db73146c4786","$503b04fe8c6cf9d4$var$favoriteFilterEl","$503b04fe8c6cf9d4$var$favoriteRecipesListEl","getAllCategories","then","data","Error","markup","map","name","join","insertAdjacentHTML","catch","error","findProduct","searchCategory","category","parse","getItem","$503b04fe8c6cf9d4$var$findProductByFilter"],"version":3,"file":"favorites.b8f8b9a3.js.map"}