{"mappings":"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","sources":["src/favourites.js","src/js/favorites/favorite_filter.js","src/js/favorites/favorite_recipes.js"],"sourcesContent":["import './js/header';\nimport './js/slick.min';\n\nimport './js/favorites/favorite_filter';\nimport './js/favorites/favorite_recipes';\n\nimport './js/modals/mobile_menu';\nimport './js/modals/order_now';\nimport './js/modals/rating';\nimport './js/modals/recipe';\nimport './js/modals/scroll-up';\n\nimport './js/api';\nimport './js/templates';\n","import { createCardTemplate } from '../card_template';\nimport { KEY_FAVORITE } from './favorite_recipes';\n\nconst favoriteFilterEl = document.querySelector('.favorite-filter-list');\nconst favoriteRecipesListEl = document.querySelector('.favorite-recipes-list');\nconst btnAllCategory = document.querySelector('.all-category');\n\nlet favoriteArrFromLocalStorage =\n  JSON.parse(localStorage.getItem(KEY_FAVORITE)) ?? [];\nlet focusOnBtn = 0;\nlet focusOnAllBtn = 0;\n\nconst allCategories = favoriteArrFromLocalStorage.flatMap(\n  product => product.category\n);\n\nconst uniqueCategories = allCategories.filter(\n  (category, index, array) => array.indexOf(category) === index\n);\n\nuniqueCategories.sort((a, b) => a.localeCompare(b));\n\ncreateFilterMarkup(uniqueCategories);\n\nfavoriteFilterEl.addEventListener('click', onClick);\nfavoriteRecipesListEl.addEventListener('click', removeHandler);\n\nfunction onClick(evt) {\n  if (evt.target.classList.contains('favorite-filter-btn')) {\n    btnAllCategory.classList.remove('favorite-active-btn');\n    if (focusOnAllBtn != 0) {\n      btnAllCategory.classList.remove('in-focus');\n      focusOnAllBtn = 0;\n    }\n    if (focusOnBtn != 0) {\n      const btnInFocus = document.querySelector('.in-focus');\n      btnInFocus.classList.remove('in-focus');\n      focusOnBtn = 0;\n    }\n    const findProduct = findProductByFilter(evt.target);\n    createCardTemplate(findProduct, favoriteRecipesListEl);\n    const checkHeartEl = document.querySelectorAll('.js-add-to-fav');\n    checkHeartEl.forEach(item => (item.checked = true));\n  }\n}\n\nfunction removeHandler(evt) {\n  if (evt.target.classList.contains('js-add-to-fav')) {\n    const productId = evt.target.closest('.card-template').dataset.id;\n    const product = favoriteArrFromLocalStorage.find(\n      ({ _id }) => _id === productId\n    );\n    favoriteArrFromLocalStorage = JSON.parse(\n      localStorage.getItem(KEY_FAVORITE)\n    );\n    if (favoriteArrFromLocalStorage.some(item => item.category === product.category)) {\n      const btn = document.querySelector(\n        `li[data-category=\"${product.category}\"]`\n      );\n      console.log(btn);\n      if (!btnAllCategory.classList.contains('in-focus')){\n        btn.firstElementChild.classList.add('in-focus');\n        focusOnBtn += 1;\n      }\n      return;\n    } else {\n      const btn = document.querySelector(\n        `li[data-category=\"${product.category}\"]`\n      );\n      btn.remove();\n       focusOnBtn = 0;\n      if (favoriteArrFromLocalStorage.length === 0) {\n        btnAllCategory.remove();\n      }\n    }\n  }\n}\n\nfunction createFilterMarkup(arr) {\n  const markup = arr\n    .map(\n      category =>\n        `<li class=\"favorite-filter-item\" data-category=\"${category}\">\n             <button type=\"button\" class=\"favorite-filter-btn\">\n            ${category}\n             </button>\n            </li>`\n    )\n    .join('');\n  favoriteFilterEl.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction findProductByFilter(elem) {\n  const favoriteArrFromLocalStorage = JSON.parse(\n    localStorage.getItem(KEY_FAVORITE)\n  );\n  const searchCategory = elem.closest('.favorite-filter-item').dataset.category;\n  if (searchCategory === 'all') {\n    btnAllCategory.classList.add('in-focus');\n    focusOnAllBtn += 1;\n    return favoriteArrFromLocalStorage;\n  }\n  return favoriteArrFromLocalStorage.filter(\n    ({ category }) => category === searchCategory\n  );\n}","import { createCardTemplate } from \"../card_template\";\nimport { popUpFunction } from '../modals/recipe';\nimport { removeFromFavorites} from '../api';\n\nconst KEY_FAVORITE = 'favorite';\n\nconst favoriteRecipesListEl = document.querySelector('.favorite-recipes-list');\nconst heroEl = document.querySelector('.hero-section-favorites');\nconst filtersEl = document.querySelector('.favorite-filter');\nconst paginationEl = document.querySelector('.tui-pagination');\n\nconst emptyStorageEl = document.querySelector('.empty-storage-wrapper');\n\nconst favoritesArray = JSON.parse(localStorage.getItem(KEY_FAVORITE)) ?? [];\n\nif (favoritesArray.length !== 0) {\n  createCardTemplate(favoritesArray, favoriteRecipesListEl);\n  const checkHeartEl = document.querySelectorAll('.js-add-to-fav');\n  checkHeartEl.forEach((item) => item.checked = true)\n} else {\n  heroEl.classList.add(\"hero-is-hidden\");\n  filtersEl.classList.add('hiddenvisualy');\n  paginationEl.classList.add('hiddenvisualy');\n  emptyStorageEl.classList.remove('hiddenvisualy');\n}\n\nfavoriteRecipesListEl.addEventListener('click', onClick);\n\nfunction onClick(evt) {\n  //відкриття модалки\n  if (evt.target.classList.contains('card-template-btn')) {\n    const product = findProduct(evt.target);\n    popUpFunction(product);\n  }\n  //видалення з favorites\n  if (evt.target.classList.contains('js-add-to-fav')) {\n    removeFromFavorites(KEY_FAVORITE, evt.target, favoritesArray);\n    evt.target.closest('.card-template').remove();\n  }\n}\n\nfunction findProduct(elem) {\n  const productId = elem.closest('.card-template').dataset.id;\n  return favoritesArray.find(({ _id }) => _id === productId);\n}\n\nexport {KEY_FAVORITE};"],"names":["parcelRequire","$e00ce136fe08f6af$var$ref","$boQj9","$e00ce136fe08f6af$export$505d86cb4934f888","$e00ce136fe08f6af$var$favoriteRecipesListEl","document","querySelector","$e00ce136fe08f6af$var$heroEl","$e00ce136fe08f6af$var$filtersEl","$e00ce136fe08f6af$var$paginationEl","$e00ce136fe08f6af$var$emptyStorageEl","$e00ce136fe08f6af$var$favoritesArray","JSON","parse","localStorage","getItem","length","createCardTemplate","querySelectorAll","forEach","item","checked","classList","add","remove","addEventListener","evt","target","contains","product","elem","productId","closest","dataset","id","find","param","_id","$QPNXd","popUpFunction","$b7ONl","removeFromFavorites","$4509e8d12349f6b7$var$ref","markup","$4509e8d12349f6b7$var$favoriteFilterEl","$4509e8d12349f6b7$var$favoriteRecipesListEl","$4509e8d12349f6b7$var$btnAllCategory","$4509e8d12349f6b7$var$favoriteArrFromLocalStorage","$4509e8d12349f6b7$var$focusOnBtn","$4509e8d12349f6b7$var$focusOnAllBtn","$4509e8d12349f6b7$var$uniqueCategories","flatMap","category","filter","index","array","indexOf","sort","a","b","localeCompare","map","concat","join","insertAdjacentHTML","findProduct","favoriteArrFromLocalStorage1","searchCategory","$4509e8d12349f6b7$var$findProductByFilter","some","btn","console","log","firstElementChild"],"version":3,"file":"favorites.ceb831f6.js.map"}