{"mappings":"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","sources":["src/favourites.js","src/js/favorites/favorite_filter.js","src/js/favorites/favorite_recipes.js"],"sourcesContent":["import './js/header';\nimport './js/slick.min';\n\nimport './js/favorites/favorite_filter';\nimport './js/favorites/favorite_recipes';\n\nimport './js/modals/mobile_menu';\nimport './js/modals/order_now';\nimport './js/modals/rating';\nimport './js/modals/recipe';\nimport './js/modals/scroll-up';\n\nimport './js/api';\nimport './js/templates';\n","import { createCardTemplate } from '../card_template';\nimport { KEY_FAVORITE } from './favorite_recipes';\n\nconst favoriteFilterSectionEl = document.querySelector('.favorite-filter');\nconst favoriteFilterEl = document.querySelector('.favorite-filter-list');\nconst favoriteRecipesListEl = document.querySelector('.favorite-recipes-list');\nconst emptyStorageEl = document.querySelector('.empty-storage-wrapper');\n\nlet favoriteArrFromLocalStorage =\n  JSON.parse(localStorage.getItem(KEY_FAVORITE)) ?? [];\nlet focusOnBtn = 0;\nlet focusOnAllCategoryBtn = 0;\n\nconst allCategories = favoriteArrFromLocalStorage.flatMap(\n  product => product.category\n);\n\nconst uniqueCategories = allCategories.filter(\n  (category, index, array) => array.indexOf(category) === index\n);\n\nuniqueCategories.sort((a, b) => a.localeCompare(b));\n\ncreateFilterMarkup(uniqueCategories);\nconst btnAllCategory = document.querySelector('.all-category');\n\nfavoriteFilterEl.addEventListener('click', onClick);\nfavoriteRecipesListEl.addEventListener('click', removeHandler);\n\nfunction onClick(evt) {\n  if (evt.target.classList.contains('favorite-filter-btn')) {\n    btnAllCategory.classList.remove('favorite-active-btn');\n    if (focusOnAllCategoryBtn != 0) {\n      btnAllCategory.classList.remove('in-focus');\n      focusOnAllCategoryBtn = 0;\n    }\n    if (focusOnBtn != 0) {\n      const btnInFocus = document.querySelector('.in-focus');\n      btnInFocus.classList.remove('in-focus');\n      focusOnBtn = 0;\n    }\n    const findProduct = findProductByFilter(evt.target);\n    createCardTemplate(findProduct, favoriteRecipesListEl);\n    const checkHeartEl = document.querySelectorAll('.js-add-to-fav');\n    checkHeartEl.forEach(item => (item.checked = true));\n  }\n}\n\nfunction removeHandler(evt) {\n  if (evt.target.classList.contains('js-add-to-fav')) {\n    const productId = evt.target.closest('.card-template').dataset.id;\n    const product = favoriteArrFromLocalStorage.find(\n      ({ _id }) => _id === productId\n    );\n    favoriteArrFromLocalStorage = JSON.parse(\n      localStorage.getItem(KEY_FAVORITE)\n    );\n    if (\n      favoriteArrFromLocalStorage.some(\n        item => item.category === product.category\n      )\n    ) {\n      const btn = document.querySelector(\n        `li[data-category=\"${product.category}\"]`\n      );\n      if (\n        !btnAllCategory.classList.contains('in-focus') &&\n        !btnAllCategory.classList.contains('favorite-active-btn')\n      ) {\n        btn.firstElementChild.classList.add('in-focus');\n        focusOnBtn += 1;\n      }\n      return;\n    } else {\n      const btn = document.querySelector(\n        `li[data-category=\"${product.category}\"]`\n      );\n      btn.remove();\n      focusOnBtn = 0;\n      if (!btnAllCategory.classList.contains('favorite-active-btn')) {\n        btnAllCategory.classList.add('in-focus');\n        createCardTemplate(favoriteArrFromLocalStorage, favoriteRecipesListEl);\n        focusOnAllCategoryBtn += 1;\n      }\n      if (favoriteArrFromLocalStorage.length === 0) {\n        btnAllCategory.remove();\n        favoriteFilterSectionEl.classList.add('hiddenvisualy');\n        emptyStorageEl.classList.remove('hiddenvisualy');\n      }\n    }\n  }\n}\n\nfunction createFilterMarkup(arr) {\n  const markup = arr\n    .map(\n      category =>\n        `<li class=\"favorite-filter-item\" data-category=\"${category}\">\n             <button type=\"button\" class=\"favorite-filter-btn\">\n            ${category}\n             </button>\n          </li>`\n    )\n    .join('');\n\n  const allCategoryBtn = `<li class=\"favorite-filter-item\" data-category=\"all\">\n                          <button type=\"button\" class=\"favorite-filter-btn favorite-active-btn all-category\">\n                            All categories\n                          </button>\n                        </li >`;\n\n  favoriteFilterEl.innerHTML = allCategoryBtn;\n\n  favoriteFilterEl.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction findProductByFilter(elem) {\n  const arrFromLocalStorage = JSON.parse(localStorage.getItem(KEY_FAVORITE));\n  const searchCategory = elem.closest('.favorite-filter-item').dataset.category;\n  if (searchCategory === 'all') {\n    btnAllCategory.classList.add('in-focus');\n    focusOnAllCategoryBtn += 1;\n    return arrFromLocalStorage;\n  }\n  return arrFromLocalStorage.filter(\n    ({ category }) => category === searchCategory\n  );\n}\n","import { createCardTemplate } from '../card_template';\nimport { popUpFunction } from '../modals/recipe';\nimport { removeFromFavorites } from '../api';\nimport Pagination from 'tui-pagination';\n\nconst KEY_FAVORITE = 'favorite';\n\nconst mainElement = document.documentElement;\nconst mainElementWidth = mainElement.clientWidth;\n\nconst favoriteRecipesListEl = document.querySelector('.favorite-recipes-list');\nconst heroEl = document.querySelector('.hero-section-favorites');\nconst filtersEl = document.querySelector('.favorite-filter');\nconst paginationEl = document.querySelector('.tui-pagination');\n\nconst emptyStorageEl = document.querySelector('.empty-storage-wrapper');\n\nconst favoritesArray = JSON.parse(localStorage.getItem(KEY_FAVORITE)) ?? [];\n\nlet currentPage = 1;\nlet itemsPerPage = 0;\nlet visiblePages = 0;\n\nif (mainElement.clientWidth < 768) {\n  itemsPerPage = 3;\n  visiblePages = 2;\n  if (favoritesArray.length <= itemsPerPage) {\n    paginationEl.classList.add('hiddenvisualy');\n  }\n} else if (mainElement.clientWidth >= 768) {\n  itemsPerPage = 12;\n  visiblePages = 3;\n  if (favoritesArray.length <= itemsPerPage) {\n    paginationEl.classList.add('hiddenvisualy');\n  }\n}\n\nlet start = itemsPerPage * currentPage - itemsPerPage;\nlet end = start + itemsPerPage;\nlet partOfArr = favoritesArray.slice(start, end);\n\nif (favoritesArray.length !== 0) {\n  createCardTemplate(partOfArr, favoriteRecipesListEl);\n  const checkHeartEl = document.querySelectorAll('.js-add-to-fav');\n  checkHeartEl.forEach(item => (item.checked = true));\n} else {\n  heroEl.classList.add('hero-is-hidden');\n  filtersEl.classList.add('hiddenvisualy');\n  paginationEl.classList.add('hiddenvisualy');\n  emptyStorageEl.classList.remove('hiddenvisualy');\n}\n\nfavoriteRecipesListEl.addEventListener('click', onClick);\n\nfunction onClick(evt) {\n  //відкриття модалки\n  if (evt.target.classList.contains('card-template-btn')) {\n    const productId = evt.target.closest('.card-template').dataset.id;\n    popUpFunction(productId);\n  }\n  //видалення з favorites\n  if (evt.target.classList.contains('js-add-to-fav')) {\n    removeFromFavorites(KEY_FAVORITE, evt.target, favoritesArray);\n    evt.target.closest('.card-template').remove();\n  }\n}\n\nlet pagination = new Pagination('pagination', {\n  totalItems: favoritesArray.length,\n  itemsPerPage: itemsPerPage,\n  visiblePages: visiblePages,\n  template: {\n    page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n    currentPage:\n      '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n    moveButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\"></span>' +\n      '</a>',\n    disabledMoveButton:\n      '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\"></span>' +\n      '</span>',\n    moreButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">...</a>',\n  },\n});\n\npagination.on('afterMove', function (eventData) {\n  currentPage = eventData.page;\n  start = itemsPerPage * currentPage - itemsPerPage;\n  end = start + itemsPerPage;\n  partOfArr = favoritesArray.slice(start, end);\n  createCardTemplate(partOfArr, favoriteRecipesListEl);\n});\n\nexport { KEY_FAVORITE };\n"],"names":["parcelRequire","$e00ce136fe08f6af$var$ref","$boQj9","$e00ce136fe08f6af$export$505d86cb4934f888","$e00ce136fe08f6af$var$mainElement","document","documentElement","$e00ce136fe08f6af$var$favoriteRecipesListEl","clientWidth","querySelector","$e00ce136fe08f6af$var$heroEl","$e00ce136fe08f6af$var$filtersEl","$e00ce136fe08f6af$var$paginationEl","$e00ce136fe08f6af$var$emptyStorageEl","$e00ce136fe08f6af$var$favoritesArray","JSON","parse","localStorage","getItem","$e00ce136fe08f6af$var$currentPage","$e00ce136fe08f6af$var$itemsPerPage","$e00ce136fe08f6af$var$visiblePages","length","classList","add","$e00ce136fe08f6af$var$start","$e00ce136fe08f6af$var$end","$e00ce136fe08f6af$var$partOfArr","slice","createCardTemplate","querySelectorAll","forEach","item","checked","remove","addEventListener","evt","target","contains","productId","closest","dataset","id","$QPNXd","popUpFunction","$b7ONl","removeFromFavorites","$parcel$interopDefault","$1VFfL","totalItems","itemsPerPage","visiblePages","template","page","currentPage","moveButton","disabledMoveButton","moreButton","on","eventData","$4509e8d12349f6b7$var$ref","markup","$4509e8d12349f6b7$var$favoriteFilterSectionEl","$4509e8d12349f6b7$var$favoriteFilterEl","$4509e8d12349f6b7$var$favoriteRecipesListEl","$4509e8d12349f6b7$var$emptyStorageEl","$4509e8d12349f6b7$var$favoriteArrFromLocalStorage","$4509e8d12349f6b7$var$focusOnBtn","$4509e8d12349f6b7$var$focusOnAllCategoryBtn","$4509e8d12349f6b7$var$uniqueCategories","flatMap","product","category","filter","index","array","indexOf","sort","a","b","localeCompare","map","concat","join","innerHTML","insertAdjacentHTML","$4509e8d12349f6b7$var$btnAllCategory","findProduct","elem","arrFromLocalStorage","searchCategory","param","$4509e8d12349f6b7$var$findProductByFilter","find","_id","some","btn","firstElementChild"],"version":3,"file":"favorites.d51f04af.js.map"}