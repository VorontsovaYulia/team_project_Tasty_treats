{"mappings":"gfAAAA,EAAA,S,WCAAA,EAAA,S,ICauBC,E,gBAbvBC,EAAAF,EAAA,S,yBAIMG,EAAe,WAEfC,EAAwBC,SAASC,cAAc,0BAC/CC,EAASF,SAASC,cAAc,2BAChCE,EAAYH,SAASC,cAAc,oBACnCG,EAAeJ,SAASC,cAAc,mBAEtCI,EAAiBL,SAASC,cAAc,0BAExCK,EAA+D,QAA9CV,EAAAW,KAAKC,MAAMC,aAAaC,QAAQZ,WAAc,IAA9CF,IAAkD,IAGzEe,QAAQC,IAAI,QAKkB,IAA1BN,EAAeO,UACjB,EAAAhB,EAAAiB,oBAAmBR,EAAgBP,GACdC,SAASe,iBAAiB,kBAClCC,SAAQ,SAACC,G,OAASA,EAAKC,SAAU,C,MAE9ChB,EAAOiB,UAAUC,IAAI,kBACrBjB,EAAUgB,UAAUC,IAAI,iBACxBhB,EAAae,UAAUC,IAAI,iBAC3Bf,EAAec,UAAUE,OAAO,kBAGlCtB,EAAsBuB,iBAAiB,SAEvC,SAAiBC,GAEC,GAAZA,EAAIC,OAAOL,UAAUM,SAAS,qBAAsB,CACtD,IAAMC,GAUWC,EAVWJ,EAAIC,OAW5BI,EAAYD,EAAKE,QAAQ,kBAAkBC,QAAQC,GAClDzB,EAAe0B,MAAK,SAAAC,G,OAAMA,EAAHC,MAAkBN,C,MAX9C,EAAAO,EAAAC,eAAcV,E,CASlB,IAAqBC,EACbC,EAPFL,EAAIC,OAAOL,UAAUM,SAAS,oBAChC,EAAAY,EAAAC,qBAAoBf,EAAIC,OAAQlB,GAChCiB,EAAIC,OAAOK,QAAQ,kBAAkBR,S,IDvCzC,IAIEkB,EAJIC,EAAmBxC,SAASC,cAAc,yBAC1CwC,EAAwBzC,SAASC,cAAc,0BAE/CyC,EAC0C,QAA9CH,EAAAhC,KAAKC,MAAMC,aAAaC,QAAQZ,WAAc,IAA9CyC,IAAkD,GAIpD,SAASI,IACP,IAMMC,EANgBF,EAA4BG,SAChD,SAAAnB,G,OAAWA,EAAQoB,Q,IAEkBC,QACrC,SAACD,EAAUE,EAAOC,G,OAAUA,EAAMC,QAAQJ,KAAcE,C,IAGvDG,KAAI,SAACL,G,MACJ,mDAEQM,OAF2CN,EAAS,qFAE3CM,OAATN,EAAS,8C,IAIlBO,KAAK,IACRb,EAAiBc,mBAAmB,YAAaV,E,CAlBnDD,IA2CAH,EAAiBlB,iBAAiB,SAElC,SAAiBC,GACf,GAAIA,EAAIC,OAAOL,UAAUM,SAAS,uBAAwB,CACxD,IAAM8B,GASmB5B,EATeJ,EAAIC,OAUxCgC,EAA8BjD,KAAKC,MACvCC,aAAaC,QAAQZ,KAEjB2D,EAAiB9B,EAAKE,QAAQ,yBAAyBC,QAAQgB,UAI9DU,EAA4BT,QACjC,SAAAd,G,OAAWA,EAARa,WAA4BW,C,IAHxBD,GAdP7C,QAAQC,IAAI2C,IACZ,EAAA1D,EAAAiB,oBAAmByC,EAAad,GACVzC,SAASe,iBAAiB,kBACnCC,SAAQ,SAAAC,G,OAASA,EAAKC,SAAU,C,IAC7CyB,G,CAIJ,IAA6BhB,EACrB6B,EAGAC,C","sources":["src/favourites.js","src/js/favorites/favorite_filter.js","src/js/favorites/favorite_recipes.js"],"sourcesContent":["import './js/header';\nimport './js/slick.min';\n\nimport './js/favorites/favorite_filter';\nimport './js/favorites/favorite_recipes';\n\nimport './js/modals/mobile_menu';\nimport './js/modals/order_now';\nimport './js/modals/rating';\nimport './js/modals/recipe';\nimport './js/modals/scroll-up';\n\nimport './js/api';\nimport './js/templates';\n","import { getAllCategories } from '../api';\nimport { createCardTemplate } from '../card_template';\nimport { KEY_FAVORITE } from './favorite_recipes';\n\nconst favoriteFilterEl = document.querySelector('.favorite-filter-list');\nconst favoriteRecipesListEl = document.querySelector('.favorite-recipes-list');\n\nconst favoriteArrFromLocalStorage =\n  JSON.parse(localStorage.getItem(KEY_FAVORITE)) ?? [];\n\nfilterMarkup();\n\nfunction filterMarkup() {\n  const allCategories = favoriteArrFromLocalStorage.flatMap(\n    product => product.category\n  );\n  const uniqueCategories = allCategories.filter(\n    (category, index, array) => array.indexOf(category) === index\n  );\n  const markup = uniqueCategories\n    .map((category) =>\n      `<li class=\"favorite-filter-item\" data-category=\"${category}\">\n             <button type=\"button\" class=\"favorite-filter-btn\">\n            ${category}\n             </button>\n            </li>`\n    )\n    .join('');\n  favoriteFilterEl.insertAdjacentHTML('beforeend', markup);\n}\n// getAllCategories()\n//   .then(data => {\n//     if (data.length === 0) {\n//       throw new Error();\n//     }\n\n//     const markup = data\n//       .map(function ({ name }) {\n//         if (uniqueCategories.includes(name)) {\n//           console.log(name)\n//           `<li class=\"favorite-filter-item\" data-category=\"${name}\">\n//              <button type=\"button\" class=\"favorite-filter-btn\">\n//             ${name}\n//              </button>\n//             </li>`;\n//         }\n//       })\n//       .join('');\n\n//     favoriteFilterEl.insertAdjacentHTML('beforeend', markup);\n//   })\n//   .catch(error => Notify.failure('Oops! Something went wrong!'));\n\nfavoriteFilterEl.addEventListener('click', onClick);\n\nfunction onClick(evt) {\n  if (evt.target.classList.contains('favorite-filter-btn')) {\n    const findProduct = findProductByFilter(evt.target);\n    console.log(findProduct);\n    createCardTemplate(findProduct, favoriteRecipesListEl);\n     const checkHeartEl = document.querySelectorAll('.js-add-to-fav');\n    checkHeartEl.forEach(item => (item.checked = true));\n    filterMarkup();\n  }\n}\n\nfunction findProductByFilter(elem) {\n  const favoriteArrFromLocalStorage = JSON.parse(\n    localStorage.getItem(KEY_FAVORITE)\n  );\n  const searchCategory = elem.closest('.favorite-filter-item').dataset.category;\n  if (!searchCategory) {\n    return favoriteArrFromLocalStorage;\n  }\n  return favoriteArrFromLocalStorage.filter(\n    ({ category }) => category === searchCategory\n  );\n}\n","import { createCardTemplate } from \"../card_template\";\nimport { popUpFunction } from '../modals/recipe';\nimport { removeFromFavorites } from \"../api\";\n\nconst KEY_FAVORITE = 'favorite';\n\nconst favoriteRecipesListEl = document.querySelector('.favorite-recipes-list');\nconst heroEl = document.querySelector('.hero-section-favorites');\nconst filtersEl = document.querySelector('.favorite-filter');\nconst paginationEl = document.querySelector('.tui-pagination');\n\nconst emptyStorageEl = document.querySelector('.empty-storage-wrapper');\n\nconst favoritesArray = JSON.parse(localStorage.getItem(KEY_FAVORITE)) ?? [];\n\n\nconsole.log('dddd')\n\n\n\n\nif (favoritesArray.length !== 0) {\n  createCardTemplate(favoritesArray, favoriteRecipesListEl);\n  const checkHeartEl = document.querySelectorAll('.js-add-to-fav');\n  checkHeartEl.forEach((item) => item.checked = true)\n} else {\n  heroEl.classList.add(\"hero-is-hidden\");\n  filtersEl.classList.add('hiddenvisualy');\n  paginationEl.classList.add('hiddenvisualy');\n  emptyStorageEl.classList.remove('hiddenvisualy');\n}\n\nfavoriteRecipesListEl.addEventListener('click', onClick);\n\nfunction onClick(evt) {\n  //відкриття модалки\n  if (evt.target.classList.contains('card-template-btn')) {\n    const product = findProduct(evt.target);\n    popUpFunction(product);\n  }\n  //видалення з favorites\n  if (evt.target.classList.contains('js-add-to-fav')) {\n    removeFromFavorites(evt.target, favoritesArray);\n    evt.target.closest('.card-template').remove();\n  }\n}\n\nfunction findProduct(elem) {\n  const productId = elem.closest('.card-template').dataset.id;\n  return favoritesArray.find(({ _id }) => _id === productId);\n}\n\n// function removeFromFavorites(elem, arr) {\n//   console.log(jjj);\n//   const productId = elem.closest('.card-template').dataset.id;\n//   const removeElemIdx = arr.findIndex(\n//     item => item._id === productId\n//   );\n//   arr.splice(removeElemIdx, 1);\n//   localStorage.setItem(KEY_FAVORITE, JSON.stringify(arr));\n// }\n\nexport {KEY_FAVORITE};"],"names":["parcelRequire","$e00ce136fe08f6af$var$ref","$boQj9","$e00ce136fe08f6af$export$505d86cb4934f888","$e00ce136fe08f6af$var$favoriteRecipesListEl","document","querySelector","$e00ce136fe08f6af$var$heroEl","$e00ce136fe08f6af$var$filtersEl","$e00ce136fe08f6af$var$paginationEl","$e00ce136fe08f6af$var$emptyStorageEl","$e00ce136fe08f6af$var$favoritesArray","JSON","parse","localStorage","getItem","console","log","length","createCardTemplate","querySelectorAll","forEach","item","checked","classList","add","remove","addEventListener","evt","target","contains","product","elem","productId","closest","dataset","id","find","param","_id","$QPNXd","popUpFunction","$b7ONl","removeFromFavorites","$4509e8d12349f6b7$var$ref","$4509e8d12349f6b7$var$favoriteFilterEl","$4509e8d12349f6b7$var$favoriteRecipesListEl","$4509e8d12349f6b7$var$favoriteArrFromLocalStorage","$4509e8d12349f6b7$var$filterMarkup","markup","flatMap","category","filter","index","array","indexOf","map","concat","join","insertAdjacentHTML","findProduct","favoriteArrFromLocalStorage1","searchCategory"],"version":3,"file":"favorites.e3b3c11c.js.map"}