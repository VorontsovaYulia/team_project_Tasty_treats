!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},r={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in a)return a[e].exports;if(e in r){var t=r[e];delete r[e];var i={id:e,exports:{}};return a[e]=i,t.call(i.exports,i,i.exports),i.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){r[e]=t},t.parcelRequired7c6=i),i("i8Q71"),i("4Qm2O");var n,o=i("boQj9"),s=(o=i("boQj9"),i("QPNXd")),c=i("b7ONl"),l=i("1VFfL"),d="favorite",u=document.documentElement,f=(u.clientWidth,document.querySelector(".favorite-recipes-list")),v=document.querySelector(".hero-section-favorites"),p=document.querySelector(".favorite-filter"),g=document.querySelector(".tui-pagination"),m=document.querySelector(".empty-storage-wrapper"),y=null!==(n=JSON.parse(localStorage.getItem(d)))&&void 0!==n?n:[],b=1,h=0,L=0;u.clientWidth<768?(h=3,L=2,y.length<=h&&g.classList.add("hiddenvisualy")):u.clientWidth>=768&&(h=12,L=3,y.length<=h&&g.classList.add("hiddenvisualy"));var S=h*b-h,q=S+h,O=y.slice(S,q);0!==y.length?((0,o.createCardTemplate)(O,f),document.querySelectorAll(".js-add-to-fav").forEach((function(e){return e.checked=!0}))):(v.classList.add("hero-is-hidden"),p.classList.add("hiddenvisualy"),g.classList.add("hiddenvisualy"),m.classList.remove("hiddenvisualy"));f.addEventListener("click",(function(e){if(e.target.classList.contains("card-template-btn")){var t=e.target.closest(".card-template").dataset.id;(0,s.popUpFunction)(t)}e.target.classList.contains("js-add-to-fav")&&((0,c.removeFromFavorites)(d,e.target,y),e.target.closest(".card-template").remove())})),new(e(l))("pagination",{totalItems:y.length,itemsPerPage:h,visiblePages:L,template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}"></span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}"></span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip">...</a>'}}).on("afterMove",(function(e){b=e.page,q=(S=h*b-h)+h,O=y.slice(S,q),(0,o.createCardTemplate)(O,f)}));var E,N,T=document.querySelector(".favorite-filter"),w=document.querySelector(".favorite-filter-list"),j=document.querySelector(".favorite-recipes-list"),C=document.querySelector(".empty-storage-wrapper"),M=null!==(E=JSON.parse(localStorage.getItem(d)))&&void 0!==E?E:[],k=0,x=0,P=M.flatMap((function(e){return e.category})).filter((function(e,t,a){return a.indexOf(e)===t}));P.sort((function(e,t){return e.localeCompare(t)})),N=P.map((function(e){return'<li class="favorite-filter-item" data-category="'.concat(e,'">\n             <button type="button" class="favorite-filter-btn">\n            ').concat(e,"\n             </button>\n          </li>")})).join(""),w.innerHTML='<li class="favorite-filter-item" data-category="all">\n                          <button type="button" class="favorite-filter-btn favorite-active-btn all-category">\n                            All categories\n                          </button>\n                        </li >',w.insertAdjacentHTML("beforeend",N);var Q=document.querySelector(".all-category");w.addEventListener("click",(function(e){if(e.target.classList.contains("favorite-filter-btn")){if(Q.classList.remove("favorite-active-btn"),0!=x&&(Q.classList.remove("in-focus"),x=0),0!=k)document.querySelector(".in-focus").classList.remove("in-focus"),k=0;var t=function(e){var t=JSON.parse(localStorage.getItem(d)),a=e.closest(".favorite-filter-item").dataset.category;if("all"===a)return Q.classList.add("in-focus"),x+=1,t;return t.filter((function(e){return e.category===a}))}(e.target);(0,o.createCardTemplate)(t,j),document.querySelectorAll(".js-add-to-fav").forEach((function(e){return e.checked=!0}))}})),j.addEventListener("click",(function(e){if(e.target.classList.contains("js-add-to-fav")){var t=e.target.closest(".card-template").dataset.id,a=M.find((function(e){return e._id===t}));if((M=JSON.parse(localStorage.getItem(d))).some((function(e){return e.category===a.category}))){var r=document.querySelector('li[data-category="'.concat(a.category,'"]'));return void(Q.classList.contains("in-focus")||Q.classList.contains("favorite-active-btn")||(r.firstElementChild.classList.add("in-focus"),k+=1))}document.querySelector('li[data-category="'.concat(a.category,'"]')).remove(),k=0,Q.classList.contains("favorite-active-btn")||(Q.classList.add("in-focus"),(0,o.createCardTemplate)(M,j),x+=1),0===M.length&&(Q.remove(),T.classList.add("hiddenvisualy"),C.classList.remove("hiddenvisualy"))}})),i("OtYKr"),i("dEcaA"),i("fz8By"),i("QPNXd"),i("lubkt"),i("b7ONl"),i("bfaTO")}();
//# sourceMappingURL=favorites.d51f04af.js.map
