function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},i={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in a)return a[e].exports;if(e in i){var t=i[e];delete i[e];var o={id:e,exports:{}};return a[e]=o,t.call(o.exports,o,o.exports),o.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){i[e]=t},t.parcelRequired7c6=o),o("bUb57"),o("1gCDW");var s=o("c5nH8"),r=(s=o("c5nH8"),o("8WEGn")),n=o("7rYDH"),c=o("fb9GJ");const l=document.documentElement,d=(l.clientWidth,document.querySelector(".favorite-recipes-list")),u=document.querySelector(".hero-section-favorites"),f=document.querySelector(".favorite-filter"),p=document.querySelector(".tui-pagination"),v=document.querySelector(".empty-storage-wrapper");var g;const m=null!==(g=JSON.parse(localStorage.getItem("favorite")))&&void 0!==g?g:[];let y=1,b=0,h=0;l.clientWidth<768?(b=3,h=2,m.length<=b&&p.classList.add("hiddenvisualy")):l.clientWidth>=768&&(b=12,h=3,m.length<=b&&p.classList.add("hiddenvisualy"));let L=b*y-b,S=L+b,q=m.slice(L,S);if(0!==m.length){(0,s.createCardTemplate)(q,d);document.querySelectorAll(".js-add-to-fav").forEach((e=>e.checked=!0))}else u.classList.add("hero-is-hidden"),f.classList.add("hiddenvisualy"),p.classList.add("hiddenvisualy"),v.classList.remove("hiddenvisualy");d.addEventListener("click",(function(e){if(e.target.classList.contains("card-template-btn")){const t=e.target.closest(".card-template").dataset.id;(0,r.popUpFunction)(t)}e.target.classList.contains("js-add-to-fav")&&((0,n.removeFromFavorites)("favorite",e.target,m),e.target.closest(".card-template").remove())})),new(e(c))("pagination",{totalItems:m.length,itemsPerPage:b,visiblePages:h,template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}"></span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}"></span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip">...</a>'}}).on("afterMove",(function(e){y=e.page,L=b*y-b,S=L+b,q=m.slice(L,S),(0,s.createCardTemplate)(q,d)}));const E=document.querySelector(".favorite-filter"),w=document.querySelector(".favorite-filter-list"),O=document.querySelector(".favorite-recipes-list"),T=document.querySelector(".empty-storage-wrapper");var C;let j=null!==(C=JSON.parse(localStorage.getItem("favorite")))&&void 0!==C?C:[],H=0,M=0;const x=j.flatMap((e=>e.category)).filter(((e,t,a)=>a.indexOf(e)===t));x.sort(((e,t)=>e.localeCompare(t))),function(e){const t=e.map((e=>`<li class="favorite-filter-item" data-category="${e}">\n             <button type="button" class="favorite-filter-btn">\n            ${e}\n             </button>\n          </li>`)).join("");w.innerHTML='<li class="favorite-filter-item" data-category="all">\n                          <button type="button" class="favorite-filter-btn favorite-active-btn all-category">\n                            All categories\n                          </button>\n                        </li >',w.insertAdjacentHTML("beforeend",t)}(x);const A=document.querySelector(".all-category");w.addEventListener("click",(function(e){if(e.target.classList.contains("favorite-filter-btn")){if(A.classList.remove("favorite-active-btn"),0!=M&&(A.classList.remove("in-focus"),M=0),0!=H){document.querySelector(".in-focus").classList.remove("in-focus"),H=0}const t=function(e){const t=JSON.parse(localStorage.getItem("favorite")),a=e.closest(".favorite-filter-item").dataset.category;if("all"===a)return A.classList.add("in-focus"),M+=1,t;return t.filter((({category:e})=>e===a))}(e.target);(0,s.createCardTemplate)(t,O);document.querySelectorAll(".js-add-to-fav").forEach((e=>e.checked=!0))}})),O.addEventListener("click",(function(e){if(e.target.classList.contains("js-add-to-fav")){const t=e.target.closest(".card-template").dataset.id,a=j.find((({_id:e})=>e===t));if(j=JSON.parse(localStorage.getItem("favorite")),j.some((e=>e.category===a.category))){const e=document.querySelector(`li[data-category="${a.category}"]`);return void(A.classList.contains("in-focus")||A.classList.contains("favorite-active-btn")||(e.firstElementChild.classList.add("in-focus"),H+=1))}document.querySelector(`li[data-category="${a.category}"]`).remove(),H=0,A.classList.contains("favorite-active-btn")||(A.classList.add("in-focus"),(0,s.createCardTemplate)(j,O),M+=1),0===j.length&&(A.remove(),E.classList.add("hiddenvisualy"),T.classList.remove("hiddenvisualy"))}})),o("hDduH"),o("bmAoy"),o("6jlVF"),o("8WEGn"),o("3pS2V"),o("7rYDH"),o("7sOwA");
//# sourceMappingURL=favorites.6ae0f90f.js.map
